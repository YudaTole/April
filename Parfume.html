<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Parfum Store</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #111;
      color: #fff;
      margin: 0; padding: 0;
    }
    header {
      text-align: center;
      padding: 20px;
      background: #222;
      font-size: 24px;
      font-weight: bold;
    }
    .container {
      max-width: 700px;
      margin: 30px auto;
      background: #1e1e1e;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: none;
      font-size: 16px;
    }
    input, select {
      background: #2a2a2a;
      color: #fff;
    }
    button {
      background: #ff4081;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #e73370;
    }
    .hidden { display: none; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #444;
      padding: 8px;
      text-align: center;
    }
    th {
      background: #333;
    }
  </style>
</head>
<body>

<header>ðŸŒ¸ Parfum Store ðŸŒ¸</header>

<div class="container" id="loginPage">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<div class="container hidden" id="appPage">
  <h2>Form Penjualan</h2>
  <input type="text" id="buyer" placeholder="Nama Pembeli">
  <input type="text" id="bibit" placeholder="Nama Bibit (contoh: Zara Man)">
  
  <label>Ukuran Botol (ml):</label>
  <select id="mili" onchange="updatePrice()">
    <option value="">--Pilih--</option>
    <option value="4">4 ml</option>
    <option value="8">8 ml</option>
    <option value="10">10 ml</option>
  </select>
  
  <label>Kualitas:</label>
  <select id="quality" onchange="updatePrice()">
    <option value="">--Pilih--</option>
    <option value="Murni">Murni</option>
    <option value="Premium">Premium</option>
    <option value="Sedang">Sedang</option>
    <option value="Standar">Standar</option>
  </select>
  
  <h3 id="priceDisplay">Harga: Rp 0</h3>
  
  <button onclick="saveTransaction()">Simpan Transaksi</button>
  
  <h2>ðŸ“Š Rekap Penjualan</h2>
  <p id="totalSales">Total Penjualan: Rp 0</p>
  <table>
    <thead>
      <tr>
        <th>Pembeli</th>
        <th>Bibit</th>
        <th>Mili</th>
        <th>Kualitas</th>
        <th>Harga</th>
      </tr>
    </thead>
    <tbody id="salesTable"></tbody>
  </table>
</div>

<script>
  // Harga tabel
  const priceTable = {
    "4": { "Murni": 10000, "Premium": 8500, "Sedang": 7500, "Standar": 4500 },
    "8": { "Murni": 20000, "Premium": 16500, "Sedang": 13500, "Standar": 9500 },
    "10": { "Murni": 25000, "Premium": 21000, "Sedang": 21000, "Standar": 12000 }
  };

  let currentPrice = 0;

  // Login
  function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;

    if (user && pass) {
      localStorage.setItem("userLogin", JSON.stringify({user, pass}));
      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById("appPage").classList.remove("hidden");
      loadTransactions();
    } else {
      alert("Isi username & password dulu!");
    }
  }

  // Update harga otomatis
  function updatePrice() {
    const mili = document.getElementById("mili").value;
    const quality = document.getElementById("quality").value;

    if (mili && quality) {
      currentPrice = priceTable[mili][quality];
      document.getElementById("priceDisplay").innerText = "Harga: Rp " + currentPrice.toLocaleString();
    }
  }

  // Simpan transaksi ke localStorage
  function saveTransaction() {
    const buyer = document.getElementById("buyer").value;
    const bibit = document.getElementById("bibit").value;
    const mili = document.getElementById("mili").value;
    const quality = document.getElementById("quality").value;

    if (!buyer || !bibit || !mili || !quality) {
      alert("Lengkapi semua data!");
      return;
    }

    const transaction = { buyer, bibit, mili, quality, price: currentPrice };

    let sales = JSON.parse(localStorage.getItem("sales")) || [];
    sales.push(transaction);
    localStorage.setItem("sales", JSON.stringify(sales));

    loadTransactions();

    // Reset form
    document.getElementById("buyer").value = "";
    document.getElementById("bibit").value = "";
    document.getElementById("mili").value = "";
    document.getElementById("quality").value = "";
    document.getElementById("priceDisplay").innerText = "Harga: Rp 0";
  }

  // Tampilkan transaksi
  function loadTransactions() {
    const sales = JSON.parse(localStorage.getItem("sales")) || [];
    let total = 0;
    let rows = "";

    sales.forEach(s => {
      total += s.price;
      rows += `
        <tr>
          <td>${s.buyer}</td>
          <td>${s.bibit}</td>
          <td>${s.mili} ml</td>
          <td>${s.quality}</td>
          <td>Rp ${s.price.toLocaleString()}</td>
        </tr>
      `;
    });

    document.getElementById("salesTable").innerHTML = rows;
    document.getElementById("totalSales").innerText = "Total Penjualan: Rp " + total.toLocaleString();
  }
</script>

</body>
</html>
